
doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    title TodoMVC
    link(rel="import" href="core-icon/core-icon.html")
    link(rel="import" href="paper-elements/paper-elements.html")
    script(src='//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js')
    script.
      $(document).ready(function() {
        $('#post_button').click(function() {
          $.post('/todos', {}).success(function(data, code, ajx) {
            var id = data.id;
            window.location.replace('/todos/' + id);
          });
        });
        $('.destroy').click(function() {
          var id = $(this).closest('tr').attr('id');
          $.ajax({
            url: '/todos/' + id,
            type: 'DELETE'
          }).always(function() {
            window.location.reload();
          });
        });
      });

  body
    table
      tr
        td
        each key in tableHeader
          td= key
      each r in tableBody
        tr(id=r.id)
          td(class='destroy')
            paper-icon-button(disabled="" icon="clear" role="button" aria-label="clear" aria-disabled="")
          each curr in r.values
            if curr.key === '_id'
              td
                a(href='/' + byController + '/' + curr.value)= curr.value
            else
              td= curr.value
    input(id='post_button' type='button' value='New')

